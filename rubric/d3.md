# D3 Rubric

Loaded when D3 signals detected. Covers data joins, reusable charts, scales, transitions, and Bostock's design philosophy.

## Review Criteria

1. **Data Joins** — Use `.data()` with `.join()` or explicit enter/update/exit. No manual `forEach` + `append` loops. Handle all three states when data changes.
2. **Key Functions** — Always provide key functions (`.data(data, d => d.id)`) when data may be reordered, filtered, or updated. Index-based joins cause visual corruption on data changes.
3. **Reusable Chart Pattern** — Charts implemented as closures with getter-setter methods, not classes. Callable via `selection.call(chart)`. Configurable without internal modification.
4. **Margin Convention** — Outer dimensions defined, margins subtracted, content group translated. Scales use inner width/height. No magic numbers for positioning.
5. **Scales and Domains** — Domains derived from data (`d3.extent`, `d3.max`), not hardcoded. Correct scale type for data type (linear, band, time, ordinal). Nice ticks where appropriate.
6. **No Full Redraws** — Never `selectAll("*").remove()` on update. Let data joins handle enter/update/exit. Full redraws destroy transitions and waste DOM operations.
7. **Meaningful Transitions** — Transitions show data changes, not decoration. Object constancy maintained (elements track their data through updates). Duration proportional to change magnitude.
8. **Web Standards** — Work directly with SVG/Canvas/DOM attributes. No proprietary abstractions hiding standard APIs. CSS for styling, not inline `.style()` calls where avoidable.
9. **Data-Ink Ratio** — Every visual element encodes data. No chartjunk (3D effects, gradient fills, unnecessary gridlines). Direct labeling over legends where practical.
10. **Responsive and Accessible** — ViewBox for responsive SVG sizing. ARIA labels on chart containers. Title/desc elements on SVG. Text alternatives for data conveyed only visually.

## Planning Checklist

| Concern | What the plan must address |
|---------|---------------------------|
| Data Binding | Data join strategy. Key functions for identity. |
| Chart Structure | Reusable closure pattern. Margin convention. |
| Scales | Scale types per data dimension. Domain from data. |
| Updates | Enter/update/exit handling. No full redraws. |
| Transitions | Object constancy. Meaningful animation only. |
| Accessibility | ARIA labels. Text alternatives. Responsive viewBox. |
